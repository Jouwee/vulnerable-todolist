# ms

**ms** é um pacote para interpretação de literais de tempo e conversão para milissegundos. Por exemplo:

```js
ms('2 days')  // 172800000
ms('1d')      // 86400000
ms('10h')     // 36000000
ms('2.5 hrs') // 9000000
ms('2h')      // 7200000
ms('1m')      // 60000
ms('5s')      // 5000
ms('1y')      // 31557600000
ms('100')     // 100
```

O **ms** utiliza expressões regulares (*RegExp*) para fazer a interpretação da *string*. As expressões regulares utilizadas são gulosas, o que significa que ela vai tentar encontrar a busca no máximo de caracteres possíveis antes de falhar.

Por exemplo, para a literal ```123 minuta``` ele irá tentar ler a *string* *byte* a *byte* até perceber que ela é inválida (```minuta``` não é uma unidade de tempo válida). Ao perceber que ela é inválida, ele irá tentar a próxima possibilidade, que é ```23 minuta```, e o processo erá repetido.

Isso significa que caso uma string enorme que **quase** fecha com a *regular expression*, ele irá tentar todas as possibilidades, mantendo o servidor ocupado.

Linha de comando Linux para gerar 60 mil 9s
```
printf "%.0s9" {1..60000}\`' minutea'
```

# marked

**Marked** é uma biblioteca para interpretação de síntaxe Markdown e geração de um código HTML respectivo. É utilizada no aplicativo para permitir formatação básica da tarefa.

O Markdown tem um recurso nativo para criação de links:

```markdown
Olá, [clique aqui](http://www.google.com)
```

Irá gerar:

Olá, [clique aqui](http://www.google.com)

Como a saída gerada é um HTML, podemos esperar que o **marked** gere uma tag como ```<a href="{url}">{texto}</a>```, e é exatamente isso que ele faz. Quem conhece HTML sabe que podemos fazer a execução de códigos JavaScript no href utilizando a síntaxe ```href="javascript:alert('ola')"```.

Então o que acontece se criarmos a seguinte tarefa:
```markdown
Olá, [clique aqui](javascript:alert('oi'))
```

O **marked** é esperto o suficiente para identificar essa situação e remover a tag. Se apenas existisse outra forma de representar caracteres em HTML...

  Opa! Existe! O HTML possui o conceito de ***HTML entities***, que são tags que representam caracteres. Por exemplo, ```&aacute;``` representa o "à". Também podemos utilizá-la para representar caracteres pelo hexa, como ```&#20;``` representa um espaço (Hexa 20).

  Então o que acontece se trocarmos alguns caracteres chave por *HTML entities*?

  ```markdown
  Olá, [clique aqui](javascript&#58this;alert('oi'&#41;)
  ```
